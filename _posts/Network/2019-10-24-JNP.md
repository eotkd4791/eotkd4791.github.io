---
title: "JAVA Network Programming"
categories:
  - Network
  - Java
tags:
  - Network
  - Java
comments:
  - true
---

## 네트워크
- 네트워크는 실시간으로 서로 데이터를 주고받을 수 있는 컴퓨터 및 다른 장치들의 집합. 네트워크 안의 각각의 장비를 "노드"라고 하고 노드 중에서 일반적인 PC를 "호스트"라고 한다.

- 모든 네트워크 노드는 주소를 가지고 있으며, 주소는 네트워크 종류에 따라 다르게 할당된다.

- 모든 현대의 컴퓨터 네트워크는 패킷 교환(packet-switched) 방식을 사용한다. 패킷은 네트워크를 순환하는 데이터의 덩어리라고 볼 수 있다.

- 패킷 교환 방식의 장점
   1. 단일 회선을 통해 지속적으로 많은 패킷을 교환할 수 있다는 점이고 이러한 특성을 통해 경제적으로 네트워크를 구축할 수 있다.

   2. 간섭없이 같은 선을 공유할 수 있다는 점과 체크섬(checksum)값을 이용하여 전송 중에 발생한 데이터의 손상 여부를 확인할 수 있다.

## TCP/IP-네트워크 계층
- 네트워크에 존재하는 프로토콜 스택에서 각각의 계층은 서로 인접한 계층과 통신한다. 

- 하단의 경우, 환경에 따라 일부 호스트는 이더넷을 사용하고, 일부는 와이파이나 PPP(Point to Point Protocol)을 사용한다.

- 상단 프로토콜의 경우 호스트가 실행 중인 프로그램에 따라 달라진다.

- 특정 네트워크 요구에 따라 구성된 몇몇 다른 계층 모델들이 존재한다. 대표적으로 인터넷에 적합한 표준 TCP/IP 4계층 모델을 사용한다.

- 애플리케이션들은 애플리케이션 계층에서 실행되고 전송계층하고만 통신을 한다. 전송 계층은 위아래로 인접해있는 애플리케이션 계층과 인터넷 계층하고 대화를 한다. 

## TCP/IP-호스트-투-네트워크 계층 (데이터 링크 계층)
- 이더넷 카드나 와이파이 안테나 같은 특정 네트워크 인터페이스가 물리적인 연결을 통해 로컬 네트워크 및 외부로 IP데이터그램을 보내는 방법을 정의한다.

- 이 계층의 일부는 회선, 광케이블, 전파, 연기 신호 같은 하드웨어로 구성되어 있고 다른 컴퓨터와 연결한다. 이러한 특성 때문에 때때로 네트워크 물리 계층이라고도 한다. 자바로는 이 계층과 관련이 적으며 물리 계층을 다룰 수 없다.

## TCP/IP-인터넷 계층
- 어떤 물리적인 연결과 마주하더라도 네트워크 통신을 위해 사용하는 API는 동일하며, 이것을 가능하게 하는 것이 인터넷 계층이다.

- OSI 모델에서는 인터넷 계층은 좀 더 포괄적인 이름의 네트워크 계층으로 불린다. 네트워크 계층 프로토콜은 데이터의 비트와 바이트를 좀 더 큰 그룹인 패킷으로 구성하는 방법과 다른 컴퓨터가 서로를 찾을 수 있도록 주소 체계를 정의한다.

- 인터넷 프로토콜(IP)는 세상에서 가장 널리 사용되는 네트워크 계층 프로토콜이며, 자바가 이해할 수 있는 유일한 네트워크 계층 프로토콜이기도 하다.

- 인터넷 계층을 통해 데이터는 데이터그램이라는 패킷으로 보내진다.

## TCP/IP-전송 계층
- 데이터그램 자체에는 몇 가지 단점이 있는데 데이터그램은 전송이 보장되지 않으며 목적지까지 전송되더라도 전송 중에 손상될 가능성이 있다.

- 헤더에 있는 체크섬은 단지 헤더의 손상만 발견할 수 있을 뿐 데이터그램의 데이터 부분에 대한 손상은 발견할 수 없다. 

- 각각의 데이터 그램은 출발지에서 목적지까지 서로 다른 경로로 전달되기 때문에 항상 전송한 순서대로 목적지에 도달하지는 않는다.

- 전송 계층은 만약 패킷이 손실된다면, 해당 패킷에 대해 송신자에게 재전송을 요창할 수 있다. IP네트워크는 이러한 기능을 각각 데이터그램에 몇몇 정보를 포함하고 있는 부가적인 헤더를 추가한다.

- 전송 계층의 주요 프로토콜
  1. 전송 제어 프로토콜(TCP)은 손실되거나 손상된 데이터의 재전송과 데이터의 순서를 보장하는 오버헤드가 높은 프로토콜이다.
  2. 사용자 데이터그램 프로토콜(UDP)은 수신자가 패킷의 손상을 감지할 수는 있찌만 수신된 패킷의 순서를 보장하지는 않는다.
  - UDP는 종종 TCP보다 빠르며 TCP는 신뢰할 수 있는 프로토콜, UDP는 신뢰할 수 없는 프로토콜이라고 불린다.

## TCP/IP-애플리케이션 계층
- 사용자에게 데이터가 전달되는 계층, 데이터가 전송된 후 해당 데이터로 어떤 일을 할지 결정한다. 

- 용도에 따라 분류된 프로토콜이 있다.
  - 웹을 위한 HTTP
  - 이메일 전송을 위한 SMTP, POP, IMAP 
  - 파일 전송을 위한 FTP, FSP, TFTP 
  - 파일 접근을 위한 NFS
  - 파일 공유를 위한 Gnutella, BitTorrent
  - 음성 통신의 위한 SIP, Skype

## IP, TCP, UDP

- 인터넷 프로토콜 IP는 출발지와 목적지 두 지점 사이의 여러 경로를 허용하고 손상된 라우터 주변 데이터의 패킷을 라우팅할 수 있도록 설계되었다.
  
- 두 지점 사이의 많은 경로 중 가장 빠른 경로는 시간이 지나면서 네트워크 트래픽과 다른 요인에 의해 달라질 수 있기 떄문에 특정 데이터 스트림을 구성하는 패킷들은 모두 같은 경로로 전달되지 않는다.

  - 이러한 IP의 기본 설계 요소들을 개선하기 위해, **각 연결의 끝에 IP패킷의 수신 여부 확인 기능**과 **손상되거나 손실된 패킷에 대한 재전송 요청 기능**을 추가하는 TCP가 IP계층 위에 놓인다. TCP는 패킷들이 보내진 순서와 동일한 순서로 수신 측에서 조립할 수 있게 한다.

- TCP는 오버헤드를 유발한다. 그래서 데이터의 순서가 중요하지 안호 일부 패킷의 손실이 전체 데이터 스트림을 손상시키지 않는 경우, 패킷은 종종 UDP를 이용하는 것이 효율적이다.

- UDP 사용 시 데이터 손실을 고려해야 한다면 애플리케이션 레벨에서 오류정정 코드(error-correcting code)를 UDP 데이터 스트림에 내장할 수 있다.

- 자바는 TCP, UDP만을 지원한다.
- 

<br>
<br>

|프로토콜 | 연결방식 | 데이터 경계 구분 | 통신 방식 | 신뢰성 | 전송 순서 보장 | 수신 여부 확인 | 패킨 관리 | 전송 속도| 
|:------:|:------:|:--------:|:------:|:----:|:----:|:----:|:----:|:----:|
|TCP| 연결형 프로토콜(연결 후 통신) |  1:1 | O | O | O | O | 불필요 | UDP보다 느림 |
|UDP| 비연결형 프로토콜(연결 없이 통신) |  1:1 1:N N:N | X | X | X | X | 필요 | TCP보다 빠름 |

